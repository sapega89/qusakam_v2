[gd_scene load_steps=10 format=4 uid="uid://d2qxq8pgs28p4"]

[ext_resource type="Script" uid="uid://jwbu3hndfsuh" path="res://SampleProject/Scripts/Gameplay/Scenes/Canyon.gd" id="1_canyon"]
[ext_resource type="TileSet" uid="uid://bwpcg2opya34n" path="res://SampleProject/Resources/Tileset.tres" id="2_ctv3h"]
[ext_resource type="PackedScene" uid="uid://bsg0351mx3b4u" path="res://addons/MetroidvaniaSystem/Nodes/RoomInstance.tscn" id="3_6wo6x"]
[ext_resource type="Script" uid="uid://dorfkqera68v3" path="res://SampleProject/Scripts/Gameplay/StateChangeTrigger.gd" id="4_6wo6x"]
[ext_resource type="Script" uid="uid://0u1nlyd1ld6o" path="res://SampleProject/Scripts/SavePoint.gd" id="4_ctv3h"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ctv3h"]
size = Vector2(32, 31.9999)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_6wo6x"]
bg_color = Color(0.02, 0.04, 0.08, 0.95)

[sub_resource type="CircleShape2D" id="CircleShape2D_6wo6x"]
radius = 32.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_xu4xw"]
size = Vector2(85, 70)

[node name="Canyon" type="Node2D"]
script = ExtResource("1_canyon")

[node name="TileMap" type="Node2D" parent="."]

[node name="Foreground" type="TileMapLayer" parent="TileMap"]
use_parent_material = true
tile_map_data = PackedByteArray("AAAAAAwAAQAIAAYAAAAAAA0AAQAIAAcAAAAAAA4AAQAMAAcAAAABAAwAAQAIAAYAAAABAA0AAQAIAAcAAAABAA4AAQAMAAcAAAA1AAwAAQAIAAYAAAA1AA0AAQAIAAcAAAA1AA4AAQAMAAcAAAA0AAwAAQAIAAYAAAA0AA0AAQAIAAcAAAA0AA4AAQAMAAcAAAACAAwAAQAIAAYAAAACAA0AAQAIAAcAAAACAA4AAQAIAAcAAAADAAwAAQAIAAYAAAADAA0AAQAIAAcAAAADAA4AAQAIAAcAAAAEAAwAAQAIAAYAAAAEAA0AAQAIAAcAAAAEAA4AAQAIAAcAAAAFAAwAAQAIAAYAAAAFAA0AAQAIAAcAAAAFAA4AAQAIAAcAAAAGAAwAAQAIAAYAAAAGAA0AAQAIAAcAAAAGAA4AAQAIAAcAAAAHAAwAAQAIAAYAAAAHAA0AAQAIAAcAAAAHAA4AAQAIAAcAAAAIAAwAAQAIAAYAAAAIAA0AAQAIAAcAAAAIAA4AAQAIAAcAAAAJAAwAAQAIAAYAAAAJAA0AAQAIAAcAAAAJAA4AAQAIAAcAAAAKAAwAAQAIAAYAAAAKAA0AAQAIAAcAAAAKAA4AAQAIAAcAAAALAAwAAQAIAAYAAAALAA0AAQAIAAcAAAALAA4AAQAIAAcAAAAMAAwAAQAIAAYAAAAMAA0AAQAIAAcAAAAMAA4AAQAIAAcAAAANAAwAAQAIAAYAAAANAA0AAQAIAAcAAAANAA4AAQAIAAcAAAAOAAwAAQAIAAYAAAAOAA0AAQAIAAcAAAAOAA4AAQAIAAcAAAAPAAwAAQAIAAYAAAAPAA0AAQAIAAcAAAAPAA4AAQAIAAcAAAAQAAwAAQAIAAYAAAAQAA0AAQAIAAcAAAAQAA4AAQAIAAcAAAARAAwAAQAIAAYAAAARAA0AAQAIAAcAAAARAA4AAQAIAAcAAAASAAwAAQAIAAYAAAASAA0AAQAIAAcAAAASAA4AAQAMAAcAAAATAAwAAQAIAAYAAAATAA0AAQAIAAcAAAATAA4AAQAMAAcAAAAUAAwAAQAIAAYAAAAUAA0AAQAIAAcAAAAUAA4AAQAMAAcAAAAVAAwAAQAIAAYAAAAVAA0AAQAIAAcAAAAVAA4AAQAMAAcAAAAWAAwAAQAIAAYAAAAWAA0AAQAIAAcAAAAWAA4AAQAMAAcAAAAXAAwAAQAIAAYAAAAXAA0AAQAIAAcAAAAXAA4AAQAMAAcAAAAYAAwAAQAIAAYAAAAYAA0AAQAIAAcAAAAYAA4AAQAMAAcAAAAZAAwAAQAIAAYAAAAZAA0AAQAIAAcAAAAZAA4AAQAIAAcAAAAaAAwAAQAIAAYAAAAaAA0AAQAIAAcAAAAaAA4AAQAIAAcAAAAbAAwAAQAIAAYAAAAbAA0AAQAIAAcAAAAbAA4AAQAIAAcAAAAcAAwAAQAIAAYAAAAcAA0AAQAIAAcAAAAcAA4AAQAIAAcAAAAdAAwAAQAIAAYAAAAdAA0AAQAIAAcAAAAdAA4AAQAIAAcAAAAeAAwAAQAIAAYAAAAeAA0AAQAIAAcAAAAeAA4AAQAIAAcAAAAfAAwAAQAIAAYAAAAfAA0AAQAIAAcAAAAfAA4AAQAIAAcAAAAgAAwAAQAIAAYAAAAgAA0AAQAIAAcAAAAgAA4AAQAIAAcAAAAhAAwAAQAIAAYAAAAhAA0AAQAIAAcAAAAhAA4AAQAIAAcAAAAiAAwAAQAIAAYAAAAiAA0AAQAIAAcAAAAiAA4AAQAIAAcAAAAjAAwAAQAIAAYAAAAjAA0AAQAIAAcAAAAjAA4AAQAIAAcAAAAkAAwAAQAIAAYAAAAkAA0AAQAIAAcAAAAkAA4AAQAMAAcAAAAlAAwAAQAIAAYAAAAlAA0AAQAIAAcAAAAlAA4AAQAMAAcAAAAmAAwAAQAIAAYAAAAmAA0AAQAIAAcAAAAmAA4AAQAMAAcAAAAnAAwAAQAIAAYAAAAnAA0AAQAIAAcAAAAnAA4AAQAMAAcAAAAoAAwAAQAIAAYAAAAoAA0AAQAIAAcAAAAoAA4AAQAMAAcAAAApAAwAAQAIAAYAAAApAA0AAQAIAAcAAAApAA4AAQAMAAcAAAAqAAwAAQAIAAYAAAAqAA0AAQAIAAcAAAAqAA4AAQAMAAcAAAArAAwAAQAIAAYAAAArAA0AAQAIAAcAAAArAA4AAQAMAAcAAAAsAAwAAQAIAAYAAAAsAA0AAQAIAAcAAAAsAA4AAQAMAAcAAAAtAAwAAQAIAAYAAAAtAA0AAQAIAAcAAAAtAA4AAQAMAAcAAAAuAAwAAQAIAAYAAAAuAA0AAQAIAAcAAAAuAA4AAQAMAAcAAAAvAAwAAQAIAAYAAAAvAA0AAQAIAAcAAAAvAA4AAQAMAAcAAAAwAAwAAQAIAAYAAAAwAA0AAQAIAAcAAAAwAA4AAQAMAAcAAAAxAAwAAQAIAAYAAAAxAA0AAQAIAAcAAAAxAA4AAQAMAAcAAAAyAAwAAQAIAAYAAAAyAA0AAQAIAAcAAAAyAA4AAQAMAAcAAAAzAAwAAQAIAAYAAAAzAA0AAQAIAAcAAAAzAA4AAQAMAAcAAAA2AAwAAQAIAAYAAAA2AA0AAQAMAAcAAAA3AAwAAQAIAAYAAAA3AA0AAQAMAAcAAAA4AAwAAQAIAAYAAAA4AA0AAQAMAAcAAAA5AAwAAQAIAAYAAAA5AA0AAQAIAAcAAAA6AAwAAQAIAAYAAAA6AA0AAQAIAAcAAAA7AAwAAQAIAAYAAAA7AA0AAQAIAAcAAAA8AAwAAQAIAAYAAAA8AA0AAQAIAAcAAAA9AAwAAQAIAAYAAAA9AA0AAQAIAAcAAAA+AAwAAQAIAAYAAAA+AA0AAQAIAAcAAAA/AAwAAQAIAAYAAAA/AA0AAQAIAAcAAABAAAwAAQAIAAYAAABAAA0AAQAIAAcAAABBAAwAAQAIAAYAAABBAA0AAQAIAAcAAABCAAwAAQAIAAYAAABCAA0AAQAIAAcAAABDAAwAAQAIAAYAAABDAA0AAQAIAAcAAABEAAwAAQAIAAYAAABEAA0AAQAIAAcAAABFAAwAAQAIAAYAAABFAA0AAQAIAAcAAABGAAwAAQAIAAYAAABGAA0AAQAIAAcAAABHAAwAAQAIAAYAAABHAA0AAQAIAAcAAABIAAwAAQAIAAYAAABIAA0AAQAIAAcAAABJAAwAAQAIAAYAAABJAA0AAQAIAAcAAABKAAwAAQAIAAYAAABKAA0AAQAIAAcAAABLAAwAAQAIAAYAAABLAA0AAQAIAAcAAABMAAwAAQAIAAYAAABMAA0AAQAIAAcAAABNAAwAAQAIAAYAAABNAA0AAQAIAAcAAABOAAwAAQAIAAYAAABOAA0AAQAIAAcAAABPAAwAAQAIAAYAAABPAA0AAQAIAAcAAABQAAwAAQAIAAYAAABQAA0AAQAIAAcAAAA2AA4AAQAMAAcAAABQAA8AAQAMAAcAAABPAA8AAQAMAAcAAABOAA8AAQAMAAcAAABNAA8AAQAMAAcAAABMAA8AAQAMAAcAAABMAA4AAQAMAAcAAABLAA4AAQAMAAcAAABKAA4AAQAMAAcAAABJAA4AAQAMAAcAAABIAA4AAQAMAAcAAABHAA4AAQAMAAcAAABGAA4AAQAMAAcAAABFAA4AAQAMAAcAAABEAA4AAQAMAAcAAABDAA4AAQAMAAcAAABCAA4AAQAMAAcAAABBAA4AAQAMAAcAAABAAA4AAQAMAAcAAAA/AA4AAQAMAAcAAAA+AA4AAQAMAAcAAAA9AA4AAQAMAAcAAAA8AA4AAQAMAAcAAAA7AA4AAQAMAAcAAAA6AA4AAQAMAAcAAAA5AA4AAQAMAAcAAABNAA4AAQAMAAcAAABOAA4AAQAMAAcAAABPAA4AAQAMAAcAAABQAA4AAQAMAAcAAABLAA8AAQAMAAcAAABKAA8AAQAMAAcAAABJAA8AAQAMAAcAAABIAA8AAQAMAAcAAABHAA8AAQAMAAcAAABGAA8AAQAMAAcAAABFAA8AAQAMAAcAAABEAA8AAQAMAAcAAABDAA8AAQAMAAcAAABCAA8AAQAMAAcAAABBAA8AAQAMAAcAAABAAA8AAQAMAAcAAAA/AA8AAQAMAAcAAAA+AA8AAQAMAAcAAAA9AA8AAQAMAAcAAAA8AA8AAQAMAAcAAAA7AA8AAQAMAAcAAAA6AA8AAQAMAAcAAAA5AA8AAQAMAAcAAAA4AA8AAQAMAAcAAAA3AA8AAQAMAAcAAAA2AA8AAQAMAAcAAAA1AA8AAQAMAAcAAAA0AA8AAQAMAAcAAAAzAA8AAQAMAAcAAAAyAA8AAQAMAAcAAAAxAA8AAQAMAAcAAAAvAA8AAQAMAAcAAAAwAA8AAQAMAAcAAAAuAA8AAQAMAAcAAAAtAA8AAQAMAAcAAAAsAA8AAQAMAAcAAAArAA8AAQAMAAcAAAAqAA8AAQAMAAcAAAApAA8AAQAMAAcAAAAoAA8AAQAMAAcAAAAnAA8AAQAMAAcAAAAmAA8AAQAMAAcAAAAlAA8AAQAMAAcAAAAkAA8AAQAMAAcAAAAjAA8AAQAMAAcAAAAiAA8AAQAMAAcAAAAhAA8AAQAMAAcAAAAgAA8AAQAMAAcAAAAfAA8AAQAMAAcAAAAeAA8AAQAMAAcAAAAdAA8AAQAMAAcAAAAcAA8AAQAMAAcAAAAbAA8AAQAMAAcAAAAaAA8AAQAMAAcAAAAZAA8AAQAMAAcAAAAYAA8AAQAMAAcAAAAXAA8AAQAMAAcAAAAWAA8AAQAMAAcAAAAVAA8AAQAMAAcAAAAUAA8AAQAMAAcAAAATAA8AAQAMAAcAAAASAA8AAQAMAAcAAAARAA8AAQAMAAcAAAAQAA8AAQAMAAcAAAAPAA8AAQAMAAcAAAAOAA8AAQAMAAcAAAANAA8AAQAMAAcAAAAMAA8AAQAMAAcAAAALAA8AAQAMAAcAAAAKAA8AAQAMAAcAAAAJAA8AAQAMAAcAAAAIAA8AAQAMAAcAAAAHAA8AAQAMAAcAAAAGAA8AAQAMAAcAAAAFAA8AAQAMAAcAAAAEAA8AAQAMAAcAAAADAA8AAQAMAAcAAAACAA8AAQAMAAcAAAABAA8AAQAMAAcAAAAAAA8AAQAMAAcAAAA4AA4AAQAMAAcAAAA3AA4AAQAMAAcAAAA=")
tile_set = ExtResource("2_ctv3h")

[node name="Gate" type="TileMapLayer" parent="TileMap"]
position = Vector2(116, 2)
tile_map_data = PackedByteArray("AAAAAAkAAQAKAAcAAAAAAAoAAQAKAAcAAAAAAAsAAQAKAAgAAAAAAAYAAQAKAAYAAAAAAAcAAQAKAAcAAAAAAAgAAQAKAAcAAAA=")
tile_set = ExtResource("2_ctv3h")

[node name="Gate2" type="TileMapLayer" parent="TileMap"]
position = Vector2(2559, 2)
tile_map_data = PackedByteArray("AAAAAAkAAQAKAAcAAAAAAAoAAQAKAAcAAAAAAAsAAQAKAAgAAAAAAAYAAQAKAAYAAAAAAAcAAQAKAAcAAAAAAAgAAQAKAAcAAAA=")
tile_set = ExtResource("2_ctv3h")

[node name="RoomInstance" parent="." instance=ExtResource("3_6wo6x")]

[node name="END" type="Area2D" parent="."]
position = Vector2(59.00001, 342.99997)
scale = Vector2(-3.7123058, 1.9976834)

[node name="CollisionShape2D" type="CollisionShape2D" parent="END"]
scale = Vector2(0.9334176, 1.224203)
shape = SubResource("RectangleShape2D_ctv3h")

[node name="CanvasLayer" type="CanvasLayer" parent="END"]

[node name="Panel" type="Panel" parent="END/CanvasLayer"]
modulate = Color(1, 1, 1, 0)
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_styles/panel = SubResource("StyleBoxFlat_6wo6x")

[node name="VBox" type="VBoxContainer" parent="END/CanvasLayer/Panel"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -300.0
offset_top = -150.0
offset_right = 300.0
offset_bottom = 150.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/separation = 30

[node name="Title" type="Label" parent="END/CanvasLayer/Panel/VBox"]
layout_mode = 2
theme_override_colors/font_color = Color(0.4, 0.8, 0.4, 1)
theme_override_font_sizes/font_size = 72
text = "VICTORY!"
horizontal_alignment = 1

[node name="Subtitle" type="Label" parent="END/CanvasLayer/Panel/VBox"]
layout_mode = 2
theme_override_colors/font_color = Color(0.7, 0.8, 0.9, 1)
theme_override_font_sizes/font_size = 24
text = "Congratulations! You completed the game!"
horizontal_alignment = 1

[node name="Controls" type="Label" parent="END/CanvasLayer/Panel/VBox"]
layout_mode = 2
theme_override_colors/font_color = Color(0.5, 0.6, 0.7, 1)
theme_override_font_sizes/font_size = 18
text = "Press SPACE to play again
Press ESC for main menu"
horizontal_alignment = 1

[node name="SavePoint" type="Area2D" parent="."]
position = Vector2(2525, 344)
script = ExtResource("4_ctv3h")

[node name="CollisionShape2D" type="CollisionShape2D" parent="SavePoint"]
shape = SubResource("CircleShape2D_6wo6x")

[node name="Label" type="Label" parent="SavePoint"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -29.0
offset_top = -25.0
offset_right = 29.0
offset_bottom = 25.0
grow_horizontal = 2
grow_vertical = 2
theme_override_font_sizes/font_size = 40
text = "S"
horizontal_alignment = 1
vertical_alignment = 1

[node name="StateChangeTrigger1" type="Area2D" parent="."]
position = Vector2(1667, 381)
script = ExtResource("4_6wo6x")
target_state = 2
dialogue_id = "Canyon_Exploration"

[node name="CollisionShape2D" type="CollisionShape2D" parent="StateChangeTrigger1"]
position = Vector2(16, -47)
shape = SubResource("RectangleShape2D_xu4xw")

[node name="StateChangeTrigger2" type="Area2D" parent="."]
position = Vector2(806, 392)
script = ExtResource("4_6wo6x")
target_state = 3
dialogue_id = "Canyon_AbductionCutscene"

[node name="CollisionShape2D" type="CollisionShape2D" parent="StateChangeTrigger2"]
position = Vector2(16, -47)
shape = SubResource("RectangleShape2D_xu4xw")

[node name="StateChangeTrigger3" type="Area2D" parent="."]
position = Vector2(180, 392)
script = ExtResource("4_6wo6x")
target_state = 4
dialogue_id = "RoadToVillage"

[node name="CollisionShape2D" type="CollisionShape2D" parent="StateChangeTrigger3"]
position = Vector2(16, -47)
shape = SubResource("RectangleShape2D_xu4xw")

[connection signal="body_entered" from="END" to="END" method="_on_body_entered"]
