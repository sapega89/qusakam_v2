# üêõ BUG: –¢–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è –∏–≥—Ä–æ–∫–∞ –ø—Ä–∏ –æ—Ç–ø—É—Å–∫–∞–Ω–∏–∏ –∫–ª–∞–≤–∏—à–∏

## –û–ø–∏—Å–∞–Ω–∏–µ –±–∞–≥–∞

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ –†–ï–®–ï–ù–û - –í—ã–Ω–µ—Å–µ–Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è/–∫–æ–º–Ω–∞—Ç—ã –∏–∑ _unhandled_input() –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é deferred —Ñ—É–Ω–∫—Ü–∏—é

–ü–µ—Ä—Å–æ–Ω–∞–∂ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Å–µ–π–≤ –ø–æ–∏–Ω—Ç (reset_position) —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ—Ç–ø—É—Å–∫–∞–Ω–∏—è –ª—é–±–æ–π –∫–ª–∞–≤–∏—à–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.

## ‚úÖ –ù–ê–ô–î–ï–ù–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê –ò –§–ò–ù–ê–õ–¨–ù–û–ï –†–ï–®–ï–ù–ò–ï

### –ü—Ä–∏—á–∏–Ω–∞ –±–∞–≥–∞:

**–ì–õ–ê–í–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê:** –í–µ—Å—å –∫–æ–¥ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–º–Ω–∞—Ç—ã (—Å—Ç—Ä–æ–∫–∏ 88-178) –±—ã–ª –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û —Ä–∞–∑–º–µ—â—ë–Ω –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `_unhandled_input()` –≤–º–µ—Å—Ç–æ `_ready()`.

**–ü–æ—á–µ–º—É —ç—Ç–æ –≤—ã–∑—ã–≤–∞–ª–æ –±–∞–≥:**
1. `_unhandled_input()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –ö–ê–ñ–î–û–ú input —Å–æ–±—ã—Ç–∏–∏ (–¥–≤–∏–∂–µ–Ω–∏–µ –º—ã—à–∏, –Ω–∞–∂–∞—Ç–∏–µ –∫–ª–∞–≤–∏—à–∏, –æ—Ç–ø—É—Å–∫–∞–Ω–∏–µ –∫–ª–∞–≤–∏—à–∏)
2. –ü—Ä–∏ –∫–∞–∂–¥–æ–º input —Å–æ–±—ã—Ç–∏–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–ª–∏—Å—å –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
3. –ü—Ä–∏ –∫–∞–∂–¥–æ–º input —Å–æ–±—ã—Ç–∏–∏ –≤—ã–∑—ã–≤–∞–ª—Å—è `load_room()` –∑–∞–Ω–æ–≤–æ
4. `_load_full_game_data_from_save_system()` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª `_pending_saved_position` –ø—Ä–∏ –ö–ê–ñ–î–û–ú input —Å–æ–±—ã—Ç–∏–∏
5. –≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏ –∏–≥—Ä–æ–∫–∞ –Ω–∞ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—É—é –ø–æ–∑–∏—Ü–∏—é

**–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ –∏–∑ –ª–æ–≥–æ–≤:**
```
üîç DEBUG: _load_full_game_data_from_save_system() CALLED
Frame 0 - res://SampleProject/Scripts/Game.gd:350 in function '_load_full_game_data_from_save_system'
Frame 1 - res://SampleProject/Scripts/Game.gd:127 in function '_unhandled_input'  ‚Üê –í–û–¢ –û–ù–û!
```

Stack trace —è–≤–Ω–æ –ø–æ–∫–∞–∑–∞–ª, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–∑—ã–≤–∞–ª–∞—Å—å –∏–∑ `_unhandled_input()` –Ω–∞ —Å—Ç—Ä–æ–∫–µ 127.

### –†–µ—à–µ–Ω–∏–µ:

–°–æ–∑–¥–∞–Ω–∞ –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è `_initialize_save_and_room()`, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–¥–µ—Ä–∂–∏—Ç –í–°–Æ –ª–æ–≥–∏–∫—É –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–º–Ω–∞—Ç—ã.

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ Game.gd:**

1. **–í `_ready()` (—Å—Ç—Ä–æ–∫–∞ 52):**
```gdscript
# FIX: –û—Ç–ª–æ–∂–µ–Ω–Ω—ã–π –≤—ã–∑–æ–≤ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –∫–æ–º–Ω–∞—Ç—ã
# –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∫–æ–¥ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –ü–û–°–õ–ï –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è _ready(), –Ω–æ –¢–û–õ–¨–ö–û –û–î–ò–ù –†–ê–ó
# (–≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –±–∞–≥–∞, –≥–¥–µ –∫–æ–¥ –≤—ã–ø–æ–ª–Ω—è–ª—Å—è –Ω–∞ –∫–∞–∂–¥–æ–º input —Å–æ–±—ã—Ç–∏–∏)
call_deferred("_initialize_save_and_room")
```

2. **–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è `_initialize_save_and_room()` (—Å—Ç—Ä–æ–∫–∏ 93-190):**
- –°–æ–¥–µ—Ä–∂–∏—Ç –≤—Å—é –ª–æ–≥–∏–∫—É –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑ MetSys SaveManager
- –°–æ–¥–µ—Ä–∂–∏—Ç –≤—ã–∑–æ–≤ `_load_full_game_data_from_save_system()`
- –°–æ–¥–µ—Ä–∂–∏—Ç `load_room(starting_map)`
- –°–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –ø–æ–∑–∏—Ü–∏–∏ –∏–≥—Ä–æ–∫–∞
- –°–æ–¥–µ—Ä–∂–∏—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥—É–ª—è ScrollingRoomTransitions
- –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –û–î–ò–ù –†–ê–ó —á–µ—Ä–µ–∑ `call_deferred()` –ü–û–°–õ–ï –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è `_ready()`

3. **–í `_unhandled_input()` –æ—Å—Ç–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ:**
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∞–≤–∏—à–∏ Escape
- –û–±—Ä–∞–±–æ—Ç–∫–∞ ui_cancel action
- –í—ã–∑–æ–≤ MenuManager –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è/–∑–∞–∫—Ä—ã—Ç–∏—è –º–µ–Ω—é

### –ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

- `call_deferred("_initialize_save_and_room")` –≤ `_ready()` –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –†–û–í–ù–û –û–î–ò–ù –†–ê–ó
- –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ü–û–°–õ–ï –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è `_ready()`, —á—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- `_unhandled_input()` –±–æ–ª—å—à–µ –ù–ï —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–æ–≥–∏–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏, –ø–æ—ç—Ç–æ–º—É input —Å–æ–±—ã—Ç–∏—è –Ω–µ —Ç—Ä–∏–≥–≥–µ—Ä—è—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É
- –ë–∞–≥ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏ –ü–û–õ–ù–û–°–¢–¨–Æ —É—Å—Ç—Ä–∞–Ω—ë–Ω ‚úÖ

## –°–∏–º–ø—Ç–æ–º—ã

1. **–ö–æ–≥–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:** –°—Ä–∞–∑—É –ø—Ä–∏ –æ—Ç–ø—É—Å–∫–∞–Ω–∏–∏ –∫–ª–∞–≤–∏—à–∏ (key release)
2. **–ö—É–¥–∞ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç:** –ù–∞ —Å–µ–π–≤ –ø–æ–∏–Ω—Ç (reset_position)
3. **–ß–∞—Å—Ç–æ—Ç–∞:** –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—Å–ª–µ –ª—é–±–æ–π –∞–Ω–∏–º–∞—Ü–∏–∏ (–ø—Ä—ã–∂–æ–∫, –±–µ–≥, –∞—Ç–∞–∫–∞), –Ω–æ —á–∞—â–µ –≤—Å–µ–≥–æ –≤–∏–¥–Ω–æ –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –ø—Ä—ã–∂–∫–∞
4. **–¢—Ä–∏–≥–≥–µ—Ä:** –õ—é–±–æ–π –≤–≤–æ–¥ - –¥–≤–∏–∂–µ–Ω–∏–µ –º—ã—à–∏, –∫–ª–∏–∫ –º—ã—à–∏, –Ω–∞–∂–∞—Ç–∏–µ –∫–ª–∞–≤–∏—à–∏ –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ

## –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è

> "—Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è –∏–≥—Ä–æ–∫–∞ –∏ –ø—Ä–æ—Å–ª—É—à–∫–∞ –º—ã—à–∏ –∫–∞–∂–µ—Ç—Å—è –∫–∞–∫ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –±–∞–≥ —á—Ç–æ –æ–Ω–∏ —Å–≤—è–∑–∞–Ω—ã –ø–æ—Ç–æ–º—É —á—Ç–æ –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ —Å–∞–º–æ–µ –ø–µ—Ä–≤–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –∏ –ø—Ä–∏ —ç—Ç–æ–º –Ω–µ –≤–∞–∂–Ω–æ —á—Ç–æ –±—É–¥–µ—Ç —è –Ω–∞–∂–º—É –∫–Ω–æ–ø–∫—É –º—ã—à–∏ –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –¥–µ—Ä–Ω—É –µ–π –∏–ª–∏ –Ω–∞–∂–º—É –∫–Ω–æ–ø–∫—É –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ"

> "–Ω–µ –≤–∞–∂–Ω–æ —Ö–æ—Ç—å –±–µ–≥ —Ö–æ—Ç—å –∞—Ç–∞–∫–∞ —Ö–æ—Ç—å –ø—Ä—ã–∂–æ–∫ –Ω–æ —á–∞—â–µ —è –≤–∏–∂—É –∞–Ω–∏–º–∞–π—Ü–∏—é –ø—Ä—ã–∂–∫–∞"

> "2 —Å—Ä–∞–∑—É –∫–∞–∫ –æ—Ç–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–ª–∞–≤–∏—à–∞"

> "4 –Ω–∞ —Å–µ–π–≤ –ø–æ–∏–Ω—Ç"

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –ö–ª—é—á–µ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

–í `Player.gd`:
- `reset_position: Vector2` (—Å—Ç—Ä–æ–∫–∞ 15) - –ø–æ–∑–∏—Ü–∏—è –¥–ª—è —Ä–µ—Å–ø–∞–≤–Ω–∞
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ `on_enter()`: `reset_position = position` (—Å—Ç—Ä–æ–∫–∞ 457)

### –§—É–Ω–∫—Ü–∏–∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–µ–π

1. **kill() —Ñ—É–Ω–∫—Ü–∏—è** (Player.gd:313-315):
```gdscript
func kill():
	position = reset_position
	current_health = Max_Health
```

2. **on_enter() —Ñ—É–Ω–∫—Ü–∏—è** (Player.gd:457):
```gdscript
func on_enter():
	reset_position = position
	Input.set_mouse_mode(Input.MOUSE_MODE_HIDDEN)
```

3. **Hazard.gd –≤—ã–∑—ã–≤–∞–µ—Ç kill()** (—Å—Ç—Ä–æ–∫–∞ 26):
```gdscript
func _on_area_2d_body_entered(body: Node2D) -> void:
	if body.has_method("kill"):
		body.kill()
```

### –ü—Ä–µ–¥—ã–¥—É—â–∏–µ –ø–æ–ø—ã—Ç–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

#### –ü–æ–ø—ã—Ç–∫–∞ 1: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ä—è–¥–∫–∞ –≤—ã–∑–æ–≤–æ–≤ –≤ Game.gd
- –î–æ–±–∞–≤–∏–ª–∏ `_pending_saved_position` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏
- –ò–∑–º–µ–Ω–∏–ª–∏ `init_room()` –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–æ–∑–∏—Ü–∏–∏ –ü–ï–†–ï–î `player.on_enter()`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–µ –ø–æ–º–æ–≥–ª–æ, –±–∞–≥ –æ—Å—Ç–∞–ª—Å—è

#### –ü–æ–ø—ã—Ç–∫–∞ 2: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π –º—ã—à–∏
- –ò–∑–º–µ–Ω–∏–ª–∏ `tooltip.gd` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `event.position` –≤–º–µ—Å—Ç–æ `get_global_mouse_position()`
- –£–±—Ä–∞–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–æ–±—ã—Ç–∏–π –º—ã—à–∏ –∏–∑ `shop_ui.gd._input()`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–µ –ø–æ–º–æ–≥–ª–æ, –±–∞–≥ –æ—Å—Ç–∞–ª—Å—è

## –ì–∏–ø–æ—Ç–µ–∑—ã

### ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ
1. –ë–∞–≥ —Å–≤—è–∑–∞–Ω —Å –æ—Ç–ø—É—Å–∫–∞–Ω–∏–µ–º –∫–ª–∞–≤–∏—à–∏ (key release event)
2. –¢–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –Ω–∞ reset_position (—Å–µ–π–≤ –ø–æ–∏–Ω—Ç)
3. –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–π

### ‚ùì –¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏
1. –í–æ–∑–º–æ–∂–Ω–æ, –≥–¥–µ-—Ç–æ –≤ –∫–æ–¥–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —Å–æ–±—ã—Ç–∏–µ `is_action_released()` –∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `kill()`
2. –í–æ–∑–º–æ–∂–Ω–æ, collision —Å Hazard –∑–æ–Ω–æ–π –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –æ—Ç–ø—É—Å–∫–∞–Ω–∏–∏ –∫–ª–∞–≤–∏—à–∏
3. –í–æ–∑–º–æ–∂–Ω–æ, –∞–Ω–∏–º–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –∏ —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç –∫–∞–∫–æ–π-—Ç–æ callback, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–∑—ã–≤–∞–µ—Ç —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—é
4. –í–æ–∑–º–æ–∂–Ω–æ, EventBus.player_landed —Å–∏–≥–Ω–∞–ª —Å–≤—è–∑–∞–Ω —Å –±–∞–≥–æ–º
5. –í–æ–∑–º–æ–∂–Ω–æ, –ø—Ä–æ–±–ª–µ–º–∞ –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ input events –≤ Player._input() –∏–ª–∏ Player._unhandled_input()

## –§–∞–π–ª—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
- `SampleProject/Scripts/Player.gd` (–≥–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –∏–≥—Ä–æ–∫–∞)
  - –°—Ç—Ä–æ–∫–∏ 100-200: Jump –∏ landing –ª–æ–≥–∏–∫–∞
  - –°—Ç—Ä–æ–∫–∏ 300-320: kill() —Ñ—É–Ω–∫—Ü–∏—è
  - –°—Ç—Ä–æ–∫–∏ 450-473: on_enter() —Ñ—É–Ω–∫—Ü–∏—è
  - –ü–æ–∏—Å–∫ –≤—Å–µ—Ö `is_action_released()` –≤—ã–∑–æ–≤–æ–≤

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
- `SampleProject/Scripts/Hazard.gd` (–≤—ã–∑—ã–≤–∞–µ—Ç kill())
- `SampleProject/Scripts/Game.gd` (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç–∞–º–∏ –∏ –ø–æ–∑–∏—Ü–∏–µ–π –∏–≥—Ä–æ–∫–∞)
- `SampleProject/Scenes/Portal.gd` (–ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É –∫–æ–º–Ω–∞—Ç–∞–º–∏)

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
- –í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ EventBus.player_landed
- –°–∫—Ä–∏–ø—Ç—ã, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—â–∏–µ input events –≥–ª–æ–±–∞–ª—å–Ω–æ

## –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### –®–∞–≥ 1: –î–æ–±–∞–≤–∏—Ç—å debug logging ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
–î–æ–±–∞–≤–ª–µ–Ω—ã –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ print() –≤ Player.gd:
- ‚úÖ –í kill() –¥–æ–±–∞–≤–ª–µ–Ω print_stack() –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å—Ç–µ–∫–∞ –≤—ã–∑–æ–≤–æ–≤
- ‚úÖ –í _physics_process –¥–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –æ—Ç–ø—É—Å–∫–∞–Ω–∏–∏ –∫–ª–∞–≤–∏—à–∏ –ø—Ä—ã–∂–∫–∞
- ‚úÖ –í Hazard.gd –¥–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º kill()

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
```gdscript
# Player.gd:300-303
func kill():
    # üîç DEBUG: –í—ñ–¥—Å–ª—ñ–¥–∫–æ–≤—É—î–º–æ, –∑–≤—ñ–¥–∫–∏ –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è kill()
    print("üíÄüíÄüíÄ KILL CALLED! Stack trace:")
    print_stack()
    ...

# Player.gd:116-119
if Input.is_action_just_released("jump"):
    print("üîë DEBUG: Jump released! Position: ", position, ", velocity: ", velocity)
    if not is_on_floor() and velocity.y < 0:
        velocity.y = min(0, velocity.y - JUMP_VELOCITY * SHORT_HOP)

# Hazard.gd:26
print("‚ò†Ô∏è HAZARD: –í–∏–∫–ª–∏–∫–∞—é kill() –¥–ª—è –≥—Ä–∞–≤—Ü—è! –ü–æ–∑–∏—Ü—ñ—è Hazard: ", global_position)
body.kill()
```

### –®–∞–≥ 2: –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï üîú –°–õ–ï–î–£–Æ–©–ò–ô –®–ê–ì

**–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–≥—Ä—É –≤ Godot
2. –û—Ç–∫—Ä–æ–π—Ç–µ Output –∫–æ–Ω—Å–æ–ª—å (View ‚Üí Output)
3. –ù–∞—á–Ω–∏—Ç–µ –∏–≥—Ä–∞—Ç—å –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –ø—Ä—ã–∂–æ–∫
4. –û—Ç–ø—É—Å—Ç–∏—Ç–µ –∫–ª–∞–≤–∏—à—É –ø—Ä—ã–∂–∫–∞
5. –ù–∞–±–ª—é–¥–∞–π—Ç–µ –∑–∞ –∫–æ–Ω—Å–æ–ª—å—é:
   - –ò—â–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ `üîë DEBUG: Jump released!`
   - –°—Ä–∞–∑—É –ø–æ—Å–ª–µ –Ω–µ–≥–æ –º–æ–∂–µ—Ç –ø–æ—è–≤–∏—Ç—å—Å—è `üíÄüíÄüíÄ KILL CALLED!`
   - Stack trace –ø–æ–∫–∞–∂–µ—Ç, –æ—Ç–∫—É–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è kill()
   - –ï—Å–ª–∏ –µ—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ `‚ò†Ô∏è HAZARD:` - –∑–Ω–∞—á–∏—Ç kill() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑ Hazard –∑–æ–Ω—ã

**–ß—Ç–æ –∏—Å–∫–∞—Ç—å –≤ –ª–æ–≥–∞—Ö:**
- –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–æ–±—ã—Ç–∏–π: Jump released ‚Üí Kill called?
- Stack trace –≤ kill() –ø–æ–∫–∞–∂–µ—Ç –ø—É—Ç—å –≤—ã–∑–æ–≤–∞
- –ï—Å–ª–∏ kill() –ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è, –Ω–æ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç - –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ –≤ kill()

### –®–∞–≥ 3: –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
–ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
1. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏ —Å –º–æ–º–µ–Ω—Ç–æ–º —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏
2. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å stack trace
3. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ –≤—ã–∑–æ–≤–∞ kill()
4. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞–π–¥–µ–Ω–Ω–æ–π –ø—Ä–∏—á–∏–Ω—ã

### –®–∞–≥ 4: –í–æ–∑–º–æ–∂–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏ —Ä–µ—à–µ–Ω–∏—è

**–°—Ü–µ–Ω–∞—Ä–∏–π 1:** Stack trace –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—ã–∑–æ–≤ –∏–∑ Hazard.gd
- **–ü—Ä–∏—á–∏–Ω–∞:** –ò–≥—Ä–æ–∫ –∫–∞—Å–∞–µ—Ç—Å—è hazard –∑–æ–Ω—ã –ø—Ä–∏ –æ—Ç–ø—É—Å–∫–∞–Ω–∏–∏ –∫–ª–∞–≤–∏—à–∏
- **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ Hazard –∑–æ–Ω –Ω–∞ –∫–∞—Ä—Ç–µ, –≤–æ–∑–º–æ–∂–Ω–æ collision –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç

**–°—Ü–µ–Ω–∞—Ä–∏–π 2:** Stack trace –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—ã–∑–æ–≤ –∏–∑ –¥—Ä—É–≥–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞
- **–ü—Ä–∏—á–∏–Ω–∞:** –ö–∞–∫–æ–π-—Ç–æ –¥—Ä—É–≥–æ–π —Å–∫—Ä–∏–ø—Ç –≤—ã–∑—ã–≤–∞–µ—Ç kill() –ø—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º —Å–æ–±—ã—Ç–∏–∏
- **–†–µ—à–µ–Ω–∏–µ:** –ò–∑—É—á–∏—Ç—å –Ω–∞–π–¥–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É

**–°—Ü–µ–Ω–∞—Ä–∏–π 3:** kill() –ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è, –Ω–æ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
- **–ü—Ä–∏—á–∏–Ω–∞:** –ü–æ–∑–∏—Ü–∏—è –º–µ–Ω—è–µ—Ç—Å—è –¥—Ä—É–≥–∏–º —Å–ø–æ—Å–æ–±–æ–º (–Ω–µ —á–µ—Ä–µ–∑ kill())
- **–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π position –≤ Player.gd

## –í—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç—Ä–∏–∫–∞

- **–ù–∞—á–∞–ª–æ —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è:** –≠–¢–ê–ü 1.1 —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–®–ï–ù–û –∏ –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–ù–û
- **–î–∞—Ç–∞ —Ä–µ—à–µ–Ω–∏—è:** 2025-12-31
- **–í—Ä–µ–º—è –Ω–∞ —Ä–µ—à–µ–Ω–∏–µ:** ~2 —á–∞—Å–∞ (–∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ + debug logging + –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)

## –ó–∞–º–µ—Ç–∫–∏ –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–π —Å–µ—Å—Å–∏–∏

### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ –≤ —ç—Ç–æ–π —Å–µ—Å—Å–∏–∏ (2025-12-31):
1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω debug logging –≤ Player.kill() —Å print_stack()
2. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–ø—É—Å–∫–∞–Ω–∏—è –∫–ª–∞–≤–∏—à–∏ –ø—Ä—ã–∂–∫–∞ –≤ Player._physics_process
3. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Hazard.gd –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º kill()
4. ‚úÖ –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª DEBUG_TELEPORTATION_BUG.md —Å –ø–æ–ª–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π –±–∞–≥–∞

### üîú –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–Ω–∞ —Å–ª–µ–¥—É—é—â—É—é —Å–µ—Å—Å–∏—é):
1. **–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï:** –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–≥—Ä—É –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –±–∞–≥
2. **–ê–ù–ê–õ–ò–ó –õ–û–ì–û–í:** –ò–∑—É—á–∏—Ç—å Output –∫–æ–Ω—Å–æ–ª—å –∏ –Ω–∞–π—Ç–∏ stack trace –≤—ã–∑–æ–≤–∞ kill()
3. **–û–ü–†–ï–î–ï–õ–ò–¢–¨ –ò–°–¢–û–ß–ù–ò–ö:** –ü–æ stack trace –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –æ—Ç–∫—É–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è kill()
4. **–ò–°–ü–†–ê–í–ò–¢–¨:** –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞–π–¥–µ–Ω–Ω–æ–π –ø—Ä–∏—á–∏–Ω—ã

### –í–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è:
- **–ë–∞–≥:** –¢–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è –Ω–∞ —Å–µ–π–≤ –ø–æ–∏–Ω—Ç (reset_position) –ø—Ä–∏ –æ—Ç–ø—É—Å–∫–∞–Ω–∏–∏ –∫–ª–∞–≤–∏—à–∏
- **–¢—Ä–∏–≥–≥–µ—Ä:** –õ—é–±–æ–π input (–º—ã—à—å, –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞), —á–∞—â–µ –≤—Å–µ–≥–æ –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –ø—Ä—ã–∂–∫–∞
- **–ì–∏–ø–æ—Ç–µ–∑–∞:** kill() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–ø—É—Å–∫–∞–Ω–∏–∏ –∫–ª–∞–≤–∏—à–∏, —á—Ç–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ–º–Ω–∞—Ç—É —á–µ—Ä–µ–∑ game.load_room()
- **Debug logging:** –î–æ–±–∞–≤–ª–µ–Ω –≤–æ –≤—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Å—Ç–∞ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

### –§–∞–π–ª—ã —Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏:
- `SampleProject/Scripts/Game.gd:125-127` - ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û - —É–±—Ä–∞–Ω call_deferred
- `SampleProject/Scripts/Player.gd` - ‚úÖ debug logging —É–¥–∞–ª–µ–Ω
- `SampleProject/Scripts/Hazard.gd` - ‚úÖ debug logging —É–¥–∞–ª–µ–Ω
- `DEBUG_TELEPORTATION_BUG.md` - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –±–∞–≥–∞

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢–´ –§–ò–ù–ê–õ–¨–ù–û–ì–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

**–¢–µ—Å—Ç 1: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∏–ª: "–±–∞–≥ —Å —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–µ–π –ø–µ—Ä—Å–æ–Ω–∞–¥–∂–∞ –ø—Ä–æ–ø–∞–ª" ‚úÖ
- –í—Å–µ input —Å–æ–±—ã—Ç–∏—è —Ç–µ–ø–µ—Ä—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –û–î–ò–ù –†–ê–ó –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∏–≥—Ä—ã
- –ö–æ–º–Ω–∞—Ç–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

**–¢–µ—Å—Ç 2: –ù–æ–≤–∞—è –∏–≥—Ä–∞ + –ø—Ä—ã–∂–∫–∏ + –¥–≤–∏–∂–µ–Ω–∏–µ**
- –ó–∞–ø—É—â–µ–Ω–∞ –Ω–æ–≤–∞—è –∏–≥—Ä–∞
- –í—ã–ø–æ–ª–Ω–µ–Ω—ã –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä—ã–∂–∫–∏ —Å –æ—Ç–ø—É—Å–∫–∞–Ω–∏–µ–º –∫–ª–∞–≤–∏—à–∏
- –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –¥–≤–∏–∂–µ–Ω–∏–µ –º—ã—à–∏ –∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
- –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ –ù–ï–¢ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏, –∏–≥—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ

**–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- `_initialize_save_and_room()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –¢–û–õ–¨–ö–û –û–î–ò–ù –†–ê–ó –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∏–≥—Ä—ã
- `_unhandled_input()` –±–æ–ª—å—à–µ –ù–ï —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–æ–≥–∏–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- Input —Å–æ–±—ã—Ç–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (—Ç–æ–ª—å–∫–æ Escape/ui_cancel)
- –ò–≥—Ä–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ—Å–ª–µ –æ—Ç–ø—É—Å–∫–∞–Ω–∏—è –ª—é–±–æ–π –∫–ª–∞–≤–∏—à–∏

**–í—ã–≤–æ–¥:** –ë–ê–ì –ü–û–õ–ù–û–°–¢–¨–Æ –ò–°–ü–†–ê–í–õ–ï–ù ‚úÖ –≠–¢–ê–ü 1 –ó–ê–í–ï–†–®–Å–ù ‚úÖ
