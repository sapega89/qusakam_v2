# Налаштування Xbox Контролера

## Що було додано

✅ **Підтримка Xbox контролера для всіх основних дій:**

- **Рух**: Лівий джойстик (Left Stick) або D-Pad
- **Стрибок**: Кнопка A (Xbox A)
- **Атака**: Кнопка X (Xbox X)
- **Миша**: Продовжує працювати для атаки

✅ **Меню налаштування вводу з аддону `maaacks_input_remapping`:**
- Додано меню налаштування вводу в меню опцій
- Гравці можуть змінювати прив'язки клавіш та кнопок контролера в грі
- Налаштування зберігаються автоматично

## Як перевірити контролер

### Варіант 1: Тестова сцена

1. Відкрийте сцену: `SampleProject/Scenes/Test/ControllerTest.tscn`
2. Запустіть сцену (F5)
3. Підключіть Xbox контролер
4. Натискайте кнопки та рухайте джойстиками
5. На екрані відображатиметься:
   - Статус підключення контролера
   - Всі кнопки та їх стан
   - Джойстики та їх значення
   - Дії гри та їх активація

### Варіант 2: В грі

1. Запустіть гру
2. Підключіть Xbox контролер
3. Використовуйте:
   - **Лівий джойстик** або **D-Pad** для руху
   - **Кнопка A** для стрибка
   - **Кнопка X** для атаки

### Варіант 3: Налаштування вводу в меню опцій

1. Запустіть гру
2. Відкрийте меню опцій (з головного меню або в грі)
3. Прокрутіть до секції "Controls"
4. Ви побачите меню налаштування вводу з аддону
5. Можете змінювати прив'язки клавіш та кнопок контролера:
   - Натисніть на кнопку з прив'язкою
   - Натисніть нову клавішу або кнопку контролера
   - Налаштування збережуться автоматично

## Мапінг кнопок Xbox

| Кнопка Xbox | Дія в грі |
|------------|----------|
| A | Стрибок |
| X | Атака |
| Лівий джойстик | Рух (вліво/вправо/вгору/вниз) |
| D-Pad | Рух (альтернатива джойстику) |
| LB | UI Page Up (в меню) |
| RB | UI Page Down (в меню) |
| Back/View | UI Cancel (в меню) |
| Start/Menu | UI Accept (в меню) |

## Технічні деталі

### Базові налаштування в `project.godot`:

Це налаштування за замовчуванням. Гравці можуть їх змінювати через меню налаштування вводу в грі.

- `move_left`: Лівий джойстик вліво, D-Pad вліво, клавіші A/Left Arrow
- `move_right`: Лівий джойстик вправо, D-Pad вправо, клавіші D/Right Arrow
- `move_up`: Лівий джойстик вгору, D-Pad вгору, клавіші W/Up Arrow
- `move_down`: Лівий джойстик вниз, D-Pad вниз, клавіші S/Down Arrow
- `jump`: Кнопка A (Xbox), клавіші Space/W
- `attack`: Кнопка X (Xbox), ліва кнопка миші

### Оновлені файли:

- `project.godot` - додані джойстики та кнопки для всіх дій (базові налаштування)
- `SampleProject/Scripts/Player.gd` - додана підтримка атаки з контролера
- `SampleProject/Scenes/Menus/Game/input_options_menu.tscn` - меню налаштування вводу з аддону
- `SampleProject/Scenes/Menus/Game/options_component.tscn` - додано меню налаштування вводу
- `SampleProject/Scripts/Test/ControllerTest.gd` - тестовий скрипт
- `SampleProject/Scenes/Test/ControllerTest.tscn` - тестова сцена

### Система налаштування вводу:

Проект використовує аддон `maaacks_input_remapping`, який дозволяє:
- Гравцям змінювати прив'язки клавіш та кнопок в грі
- Зберігати налаштування автоматично
- Відображати іконки контролерів (якщо встановлено Kenney Input Prompts)
- Підтримувати кілька прив'язок для однієї дії

## Усунення проблем

### Контролер не визначається

1. Перевірте, чи контролер підключено до комп'ютера
2. Перевірте в Windows: Налаштування → Пристрої → Геймпади
3. Перезапустіть Godot після підключення контролера

### Кнопки не працюють

1. Запустіть тестову сцену `ControllerTest.tscn`
2. Перевірте, чи контролер визначається
3. Перевірте, чи кнопки відображаються при натисканні
4. Якщо контролер визначається, але кнопки не працюють - перевірте налаштування в `project.godot`

### Джойстик не працює

1. Перевірте в тестовій сцені значення джойстика
2. Переконайтеся, що джойстик не заблокований
3. Перевірте deadzone в налаштуваннях (за замовчуванням 0.5)

## Додаткові можливості

Ви можете налаштувати додаткові кнопки через:
- `Project → Project Settings → Input Map`
- Або безпосередньо в `project.godot`

Для додавання нових дій використовуйте формат:
```
action_name={
"deadzone": 0.5,
"events": [
  Object(InputEventJoypadButton,"button_index":BUTTON_ID,...)
]
}
```
