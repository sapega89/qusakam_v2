# Проверка структуры каньона в MetSys

## Текущая ситуация

Каньон состоит из **более чем 4 сцен/комнат** в Metroidvania System.

## Что нужно проверить

### 1. Открыть MetSys Editor в Godot

1. В Godot Editor: **Project → Tools → Metroidvania System → Open Map Editor**
2. Проверить все комнаты с координатами, связанные с каньоном
3. Записать их room_id и координаты

### 2. Возможные комнаты каньона

Вероятно, каньон разделен на такие зоны:
- **Canyon_Start** - начало (координаты [0,0,0] или около)
- **Canyon_Meditation** - место медитации
- **Canyon_Relic** - место реликвии
- **Canyon_Transition** - переходные зоны
- И другие...

### 3. Проверить файлы сцен

Проверить, есть ли отдельные файлы сцен:
- `Canyon_Start.tscn`
- `Canyon_Meditation.tscn`
- `Canyon_Relic.tscn`
- Или все в одной `Canyon.tscn`?

### 4. Рекомендация

**Если каньон уже разделен на несколько сцен:**
- Использовать существующую структуру
- Добавить RelicArmor в сцену с реликвией
- Настроить SavePoint'ы для каждой сцены
- Обновить Canyon.gd для работы с несколькими сценами

**Если все в одной сцене:**
- Использовать несколько RoomInstance (как описано в CANYON_MULTI_ROOM_SETUP.md)
- Разместить их в разных частях одной большой сцены

## Следующие шаги

1. ✅ Открыть MetSys Editor и проверить структуру каньона
2. ✅ Записать все room_id каньона
3. ✅ Определить, сколько сцен используется
4. ✅ Решить: использовать существующую структуру или объединить в одну сцену

## Работа с существующей структурой

### Если каньон разделен на несколько сцен:

**Для каждой сцены каньона:**
1. Убедиться, что есть RoomInstance с правильным room_id
2. Добавить SavePoint для спавна персонажа
3. Настроить переходы через Portal'ы

**Для сцены с реликвией:**
1. Добавить RelicArmor (интерактивный объект обладунков)
2. Настроить dialogue_id: "RelicArmor_Examine"
3. Разместить рядом с местом реликвии

**Для сцены с медитацией:**
1. Добавить AbductionZoneTrigger для катсцены
2. Настроить триггер зоны

### Обновление Canyon.gd

Canyon.gd должен работать с несколькими сценами:
- Определять текущую сцену по room_id
- Управлять состояниями в зависимости от сцены
- Обрабатывать переходы между сценами каньона
